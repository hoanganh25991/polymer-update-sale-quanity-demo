<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<!--<link rel="import" href="my-css-mixin.html">-->
<link rel="import" href="shared-styles.html">
<link rel="import" href="my-icons.html">

<dom-module id="my-search-bar">
    <template>
        <style is="cutom-style" include="shared-styles">
            #searchBar {
                display: block;
                height: 100vh;
                width: 100vw;
                position: fixed;
                background-color: #eee;
                z-index: 50;
            }

            #searchBar[hidden] {
                /*@apply(--hidden);*/
            }

            .float-right-bottom {
                position: fixed;
                top: 90%;
                right: 20px;
            }

            .float-right-bottom[hidden] {
                /*@apply(--hidden);*/
            }
            paper-input {
                display: inline-block;
            }
        </style>
        <div id="searchBar" hidden$="[[toggleSearchBar]]">
            <paper-icon-button icon="arrow-back"></paper-icon-button>
            <!--<iron-a11y-keys id="a11y" target="[[target]]" keys="enter"-->
                            <!--on-keys-pressed="_setSearchTerm"></iron-a11y-keys>-->
            <paper-input label="Search" id="inputSearch"></paper-input>
        </div>
        <div class="float-right-bottom"
             hidden$="[[toggleSearchIcon]]"
             on-tap="_toggleSearchBar">
            <content></content>
        </div>
    </template>
    <script>
        Polymer({
            is: 'my-search-bar',
            properties: {
                toggleSearchBar: {
                    type: Boolean,
                    value: true
                },
                toggleSearchIcon: {
                    type: Boolean,
                    value: false,
                },
                searchTerm: {
                    type: String,
                    notify: true,
                    reflectToAttribute: true
                },
//                inputSearch: {
//                    type: Object,
//                    value: function(){
//                        return this.$.inputSearch;
//                    }
//                }
            },
            _toggleSearchBar: function(){
               this._reverse();
                this.$.inputSearch.focus();
            },
            listeners: {
                'keydown': '_setSearchTerm'
            },
            _setSearchTerm: function(e){
                console.log('keydown');
                if (e.keyCode === 13) {
                    // enter pressed!
                    this.searchTerm = this.$.inputSearch.value;
                    this._reverse();
                }
            },
            _reverse: function(){
                this.toggleSearchBar = !this.toggleSearchBar;
                this.toggleSearchIcon = !this.toggleSearchIcon;
            }
        });
    </script>
</dom-module>
