<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/app-storage/app-network-status-behavior.html">
<link rel="import" href="../bower_components/app-layout/app-toolbar/app-toolbar.html">

<dom-module id="my-toolbar">
    <template>
        <app-toolbar>
            <paper-icon-button icon="menu" on-tap="_askToggleDrawer"></paper-icon-button>
            <div main-title>Stores</div>
            <paper-icon-button
                    icon="cloud"
                    hidden$="[[!online]]">
            </paper-icon-button>
            <paper-icon-button
                    icon="cloud-off"
                    hidden$="[[online]]">
            </paper-icon-button>
            <paper-icon-button
                    icon="[[_computeLockIcon(signedIn)]]"
                    disabled="[[!signedIn]]"
                    on-tap="_askSignOut">
            </paper-icon-button>
        </app-toolbar>
    </template>
    <script>
        Polymer({
            is: 'my-toolbar',
            behaviors: [
                Polymer.AppNetworkStatusBehavior
            ],
            properties: {
                signedIn: {
                    type: Boolean,
                    notify: true,
                    value: false
                }
            },
            _computeLockIcon: function(signedIn){
                return signedIn ? 'lock-open' : 'lock';
            },
            lock: function(){
                this.fire('ask-sign-out');
            },
            _askToggleDrawer: function(){
                console.log('%c _askToggleDrawer', 'color: blue; font-weight: bold');
                this.fire('ask-toggle-drawer');
            },
            _askSignOut: function(){
                console.log('%c _askSignOut', 'color: blue; font-weight: bold');
                this.fire('ask-sign-out');
            }
        });
    </script>
</dom-module>